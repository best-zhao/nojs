<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>model</title>
<link rel="stylesheet" href="/css/nojs/ui.css">
<script src="/js/lib/nojs/noJS.js" id="nojs"></script>
<script>
noJS.config({
    base : '/src/',
    alias : {
        '$' : 'lib/jquery/jquery',
        'ui' : 'lib/nojs/ui'
    }
})
</script>
</head>
<body>
<style>
    .nj_module{margin:20px;border:1px solid #e4e4e4;padding:20px;}
</style>
<div nj-module="arrayEach" class="nj_module">
    <input type="text" nj-item="names">{{names}}-{{list.length}}
    <textarea cols="" rows="4" style="vertical-align:top">{{listStr()}}</textarea>
    <ul nj-each="list">
        <li data-names="{{names}}">{{$key}}  {{$parent.names+name}} 
            <input type="text" nj-item="name" />
            <a href="javascript:void(0)" 
                style="{{$parent.list.length<2?'display:none':''}}"
                nj-click="$parent.list.splice($key,1);$parent.fns($key,$parent.list.length);"

                >remove</a>
        </li>
    </ul> 
    <button class="nj_btn" nj-click="add()">add</button>

    <!-- <ul nj-each="list1">
        <li>name: {{$key}} 
            <div nj-each="$data" style="margin-left:20px">key:{{$key}}-{{$data}} | </div>
        </li>
    </ul> -->
</div>

<div nj-module="myModule" class="nj_module">
    <div>
        <textarea data-name="{{name}}">{{name}}+abc</textarea>
    </div>
    <input type="text" nj-item="name" value="" />
    <div data-class="{{name}}">name:{{arr.x.b+1}} - {{name1}}</div>

    <input type="checkbox" nj-item="checked">
    <select name="" disabled="{{checked}}">
        <option value="0" selected="">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
</div>

<div nj-module="clickToggle" class="nj_module">
    <button type="button" nj-click="toggle =! toggle">open</button>
    <div class="{{toggle?'d_hide':''}}">isopen:{{toggle}} details……</div>
</div>

<script>
noJS.use('$,lib/nojs/model', function($,nj){

    nj.module('arrayEach', function(scope){
        this.names = 'abc';        
        this.list = [
            {name:1}, {name:2}
        ]
        this.listStr = function(){
            return JSON.stringify(this.list);
        }
        this.list1 = {
            '0' : [1,2,3],
            '1' : [4,5]
        }
        this.add = function(){
            this.$set('list.push', {name:this.list.length+1});
        }   
    })
    return;
    nj.module('myModule', function(){
        this.name = 'myname';
        this.arr = {
            x:{a:1, b:2}
        };

        var self = this;
        setTimeout(function(){
            self.$set('name1','myname1');
            self.$set('arr.x.b', 3);
        },2000)
    });
    
    nj.module('clickToggle', function(){
        this.slide = function(a,b){
            console.log(a,b)
        };

    })

})
</script>

</body>
</html>