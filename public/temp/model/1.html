<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>model</title>
<link rel="stylesheet" href="/css/nojs/ui.css">
<script src="/js/lib/nojs/noJS.js" id="nojs"></script>
<script>
noJS.config({
    base : '/src/',
    alias : {
        '$' : 'lib/jquery/jquery',
        'ui' : 'lib/nojs/ui'
    }
})
</script>
</head>
<body>

<div nj-module="arrayEach">
    <input type="text" nj-item="names">{{names}}-{{list.length}}
    <ul nj-each="list">
        <li data-names="{{names}}">{{$key}}  {{$parent.names+name}} <!-- <span>{{++$key}}</span> -->
            <input type="text" nj-item="name" />
            <a href="javascript:void(0)" 
                class="{{$parent.list.length<2?'d_hide':''}}"
                nj-click="$parent.list.splice($key,1);$parent.fns($key,$parent.list.length);"

                >remove</a>
        </li>
    </ul> 
    <button class="nj_btn" nj-click="add()">add</button>
</div>

<!-- <div nj-module="myModule">
    <div>
        <textarea data-name="{{name}}">{{name}}+abc</textarea>
    </div>
    <input type="text" nj-item="name" value="" />
    <div data-class="{{name}}">name:{{arr.x.b+1}} - {{name1}}</div>

    <input type="checkbox" nj-item="checked">
    <select name="" disabled="{{checked}}">
        <option value="0" selected="">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
</div> -->

<!-- <div nj-module="clickToggle">
    <button type="button" nj-click="toggle=!toggle">open</button>
    <div class="{{toggle?'d_hide':''}}">isopen:{{toggle}} details……</div>
</div> -->

<script>
noJS.use('$,lib/nojs/model', function($,nj){

    nj.module('arrayEach', function(scope){
        this.names = 'abc';
        this.fns = function(n){
            console.log(arguments)
        }
        this.list = [
            {name:1, remove:function(){
                console.log(this)
            }},
            {name:2}
        ]
        this.add = function(){
            this.$set('list.push', {name:this.list.length+1});
            //this.list.push({name:this.list.length+1});
            //scope.apply('list');
        }   
        
    })
    
    // var m1 = nj.module('myModule', function(){
    //     this.name = 'myname';
    //     this.arr = {
    //         x:{a:1, b:2},
    //         y:function(){
    //             console.log(this, arguments)
    //         }
    //     };

    //     this.$set('name','nolure');
        
    //     var self = this;
    //     setTimeout(function(){
    //         self.$set('name1','myname1');
    //         //self.$set('arr.y', 1);//function
    //         self.$set('arr.x.b', 3);
    //     },2000)
    // });
    
    // var m2 = nj.module('clickToggle', function(){
    //     this.slide = function(a,b){
    //         console.log(a,b)
    //     };

    // })
    

})
</script>

</body>
</html>