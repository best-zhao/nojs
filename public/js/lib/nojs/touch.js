/*nolure@vip.qq.com*/define("lib/nojs/touch",["lib/jquery/jquery"],function(require){function a(a){return"tagName"in a?a:a.parentNode}function b(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){i=null,k.last&&(k.el.trigger("longTap"),k={})}function d(){i&&clearTimeout(i),i=null}function e(){f&&clearTimeout(f),g&&clearTimeout(g),h&&clearTimeout(h),i&&clearTimeout(i),f=g=h=i=null,k={}}var f,g,h,i,j=require("lib/jquery/jquery"),k={},l=750;!function(){var m,n;j(document).on("touchstart",function(b){b=b.originalEvent?b.originalEvent:b,m=Date.now(),n=m-(k.last||m),k.el=j(a(b.touches[0].target)),f&&clearTimeout(f),k.x1=b.touches[0].pageX,k.y1=b.touches[0].pageY,n>0&&250>=n&&(k.isDoubleTap=!0),k.last=m,i=setTimeout(c,l)}).on("touchmove",function(a){a=a.originalEvent?a.originalEvent:a,d(),k.x2=a.touches[0].pageX,k.y2=a.touches[0].pageY,Math.abs(k.x1-k.x2)>10&&a.preventDefault()}).on("touchend",function(a){a=a.originalEvent?a.originalEvent:a,d(),k.x2&&Math.abs(k.x1-k.x2)>30||k.y2&&Math.abs(k.y1-k.y2)>30?h=setTimeout(function(){k.direction=b(k.x1,k.x2,k.y1,k.y2),k.el.trigger("swipe",k),k.el.trigger("swipe"+k.direction,k),k={}},0):"last"in k&&(g=setTimeout(function(){var a=j.Event("tap");a.cancelTouch=e,k.el.trigger(a),k.isDoubleTap?(k.el.trigger("doubleTap"),k={}):f=setTimeout(function(){f=null,k.el.trigger("singleTap"),k={}},250)},0))}).on("touchcancel",e),j(window).on("scroll",e)}(),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(a){j.fn[a]=function(b){return this.on(a,b)}})});