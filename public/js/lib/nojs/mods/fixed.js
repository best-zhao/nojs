/*nolure@vip.qq.com*/define("lib/nojs/mods/fixed",[],function(require,a){var b=a(window),c=a.browser("ie6"),d=function(c,e){if(c="string"==typeof c?a("#"+c):c,c&&c.length){e=e||{},e.element=c,e.wrap=e.wrap||b,!d.init&&d.bind(e),e.offset=e.offset||0,e.top=c.offset().top,e.state=0,e.Float=/absolute|fixed/.test(c.css("position")),e.style=e.element.attr("style")||"";var f=(c.outerWidth(),c.outerHeight(!0)),g=e.until;g&&g.element&&g.element.length?(g.offset=g.offset||0,g.top=g.element.offset().top-g.offset,g.bottom=f):e.until=null,e.Float||(e.holder=a('<div class="nj_fix_holder"></div>').insertBefore(c),e.holderStyle={width:"1px",height:f}),d.item.push(e),d.scroll()}};return d.item=[],d.scroll=function(){var a,b,e,f,g,h;for(f=0,g=d.item.length;g>f;f++){if(h=d.item[f],a=h.wrap.scrollTop(),b=h.until,e=h.top,a>e-h.offset){if(!h.state&&h.holder&&(h.holderStyle.height=h.element.outerHeight(!0),h.holder.css(h.holderStyle)),b){if(b.top=b.element.offset().top-b.offset,b.bottom+h.offset+a>=b.top){h.state=2,h.element.css({position:"absolute",top:b.top-b.bottom});continue}2==h.state&&h.element.attr("style",h.style)}if(1!=h.state){var i={top:c?h.offset+a:h.offset,position:c?"absolute":"fixed"};h.autoWidth&&(i.width=h.element.parent().width()),h.element.css(i).addClass("nj_fixed"),h.state=1,h.start&&h.start()}}else h.state&&(h.state=0,h.element.attr("style",h.style).removeClass("nj_fixed"),h.holder&&h.holder.removeAttr("style"),h.end&&h.end());h.callback&&h.callback()}},d.bind=function(a){d.init=1,a.wrap.on("scroll.nj_fixed",d.scroll)},d.reset=function(a){d.item=[],d.init=null,a.off("scroll.nj_fixed")},d});