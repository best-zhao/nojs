/*nolure@vip.qq.com*/define("lib/nojs/mods/notification",[],function(){function a(a){this.options=a=a||{url:"",title:"",body:""},this.notification=null,this.permissionStatue=1,this.notificationStyle=a.style||1,this.displayTime=a.timeout||5e3,this.content=null}return a.prototype={constructor:a,checkSupport:function(){this.notification=window.Notifications||window.webkitNotifications},requestPermission:function(){this.notification.requestPermission(),this.permissionStatue=this.notification.checkPermission()},checkPermissionStatue:function(){0==this.permissionStatue&&this.notificationContent()},notificationContent:function(){var a=this;switch(this.notificationStyle){case 1:this.content=this.notification.createNotification(this.options.url,this.options.title,this.options.body);break;case 2:this.content=this.notification.createHTMLNotification(this.options.url);break;default:alert("Sorry, you have not defined the notificationStyle.")}this.content.onshow=function(){setTimeout(function(){a.content.cancel()},a.displayTime)},this.content.show(),setTimeout(function(){a.content.cancel()},a.displayTime)},init:function(){if(this.checkSupport(),this.notification)this.requestPermission(),this.checkPermissionStatue();else{var a=document.createElement("script");a.type="text/vbscript",a.text="Function noticeie(title,body) MsgBox body,64,title  End Function";var b=document.getElementsByTagName("head")[0]||document.documentElement;b.appendChild(a);try{noticeie(this.options.title,this.options.body)}catch(c){}}}},a});