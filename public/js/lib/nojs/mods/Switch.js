/*nolure@vip.qq.com*/define("lib/nojs/mods/Switch",["lib/jquery/jquery","lib/nojs/ui"],function(require){function a(b,c){return this instanceof a?void((this.element=d.dom(b))&&(this.menu=this.element.find(".nj_s_menu").first(),this.menuItem=this.menu.find(".nj_s_m"),this.wrap=this.element.find(".nj_s_con").first(),this.item=this.wrap.children(".nj_s_c"),this.length=this.item.length,this.length&&(this.options=c=c||{},this.mode=c.mode||d.config.eventType,this.onChange=c.onChange,this.onHide=c.onHide,this.index=this.getIndex(c.firstIndex),this.rule=c.rule||this.rule,this.options.start=this.options.start===!1?!1:!0,this.bind()))):new a(b,c)}function b(a,c){if(b.baseConstructor.call(this,a,c),this.element){this.play=null,this.time=this.options.time||5e3,this.auto=this.options.auto===!1?!1:!0,this.stopOnHover=this.options.stopOnHover===!1?!1:!0;var d=this;this.stopOnHover&&this.element.hover(function(){d.play=clearInterval(d.play)},function(){d.start()}),this.getNum(),this.options.start&&this.start(!0)}}var c=require("lib/jquery/jquery"),d=require("lib/nojs/ui");return a.prototype={bind:function(){var a,b,d=this,e="mouseover"==this.mode?100:0;this.menuItem&&(this.menuItem.on(this.mode+".nj_switch",function(){return b=c(this),b.hasClass("current")?!1:(d.onTrigger&&d.onTrigger(),a=setTimeout(function(){d.change(d.menuItem.index(b))},e),!1)}).mouseout(function(){a=clearTimeout(a)}),this.options.start&&this.change(this.index))},getIndex:function(a){return a=parseInt(a)||0,a=a>this.length-1?0:a,a=0>a?this.length-1:a},change:function(a){if(a=this.getIndex(a),this.rule){if(this.rule.call(this,a)===!1)return!1}else this.item.eq(a).show().siblings().hide(),this.menuItem.eq(a).addClass("current").siblings().removeClass("current");this.onHide&&this.index!=a&&this.onHide.call(this,this.index),this.index=a,this.onChange&&this.onChange.call(this,a)}},d.extend(b,a),b.prototype.getNum=function(){if(!this.menu.children().length){for(var a="",b=1;b<=this.length;b++)a+='<li class="nj_s_m">'+b+"</li>";this.mene.append(a),this.menuItem=this.menu.find(".nj_s_m"),this.bind()}},b.prototype.onTrigger=function(){!this.stopOnHover&&this.start()},b.prototype.rule=function(a){this.item.eq(a).fadeIn(400).siblings().hide(),this.menuItem.eq(a).addClass("current").siblings().removeClass("current"),this.index=a},b.prototype.start=function(a){var b=this;!this.auto||this.length<2||(a&&this.change(this.index),clearInterval(b.play),b.play=setInterval(function(){b.change(++b.index)},b.time))},{tab:a,slide:b}});